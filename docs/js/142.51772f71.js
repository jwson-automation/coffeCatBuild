"use strict";(globalThis["webpackChunkCoffee_Cat"]=globalThis["webpackChunkCoffee_Cat"]||[]).push([[142],{7142:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var l=t(9835),o=t(1957),s=t(6970);const n={class:"row q-pa-sm bg-primary bg-white"},d={key:0,class:"no-tasks absolute-center"},i=(0,l._)("div",{class:"text-h5 text-primary text-center"},"감상문을 등록해주세요.",-1),r=(0,l._)("span",{class:"q-ml-sm"},"정말로 삭제하시겠어요?",-1);function c(e,a,t,c,u,p){const m=(0,l.up)("q-btn"),g=(0,l.up)("q-input"),w=(0,l.up)("q-item-section"),k=(0,l.up)("q-item-label"),f=(0,l.up)("q-card-section"),h=(0,l.up)("q-card"),b=(0,l.up)("q-list"),y=(0,l.up)("q-icon"),q=(0,l.up)("q-page"),_=(0,l.up)("q-avatar"),W=(0,l.up)("q-card-actions"),v=(0,l.up)("q-dialog"),C=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(q,{class:"bg-grey-3 column"},{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l.Wm)(g,{modelValue:e.newTask,"onUpdate:modelValue":a[0]||(a[0]=a=>e.newTask=a),onKeyup:(0,o.D2)(e.addTask,["enter"]),class:"col",square:"",filled:"",placeholder:"감상문 추가",dense:"",style:{"background-color":"white","margin-top":"20px"}},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{onClick:e.addTask,round:"",dense:"",flat:"",icon:"add"},null,8,["onClick"])])),_:1},8,["modelValue","onKeyup"])]),(0,l.Wm)(b,{class:"bg-white",separator:"",bordered:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.tasks.slice().reverse(),((a,t)=>((0,l.wg)(),(0,l.j4)(h,{key:a.title,class:"q-pa-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"q-pa-md",style:{"border-radius":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{style:{"background-color":"wheat"},avatar:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(a.name),1)])),_:2},1024),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"toDoTitle"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(a.title),1)])),_:2},1024),(0,l.Wm)(k,{class:"date",style:{opacity:"50%"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(a.date),1)])),_:2},1024)])),_:2},1024),a.done?((0,l.wg)(),(0,l.j4)(w,{key:0,side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{onClick:(0,o.iM)((a=>e.showConfirmDialog(t)),["stop"]),flat:"",round:"",color:"primary",dense:"",icon:"delete"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),e.tasks.length?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(y,{name:"check",size:"100px",color:"primary"}),i]))])),_:1}),(0,l.Wm)(v,{modelValue:e.confirm,"onUpdate:modelValue":a[2]||(a[2]=a=>e.confirm=a),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{icon:"warning",color:"primary","text-color":"white"}),r])),_:1}),(0,l.Wm)(W,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(m,{flat:"",label:"취소",color:"primary"},null,512),[[C]]),(0,l.wy)((0,l.Wm)(m,{flat:"",label:"삭제",color:"primary",onClick:a[1]||(a[1]=a=>e.deleteTask(e.confirmIndex))},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}t(9665);var u=t(499),p=t(9302),m=t(4987),g=t(8109),w=t(2866);const k=(0,l.aZ)({name:"IndexPage",setup(){const e=(0,u.iH)(""),a=(0,u.qj)([]),t="익명의 "+w.randomNameBox[Math.floor(100*Math.random())],o=(0,g.hJ)(m.db,"tasks"),s=(0,g.hJ)(m.db,"backup");let n=0;const d=async()=>{(0,g.PL)(s).then((e=>{console.log("addTask : "+e.size),n=e.size}));const l=new Date,d=`${l.getFullYear().toString().substr(-2)}/${(l.getMonth()+1).toString().padStart(2,"0")}/${l.getDate().toString().padStart(2,"0")} ${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}`;a.push({id:n+1,name:t,title:e.value,done:!0,date:d}),(0,g.pl)((0,g.JU)(o,n+1+""),{id:n+1,name:t,title:e.value,done:!1,date:d}),(0,g.pl)((0,g.JU)(s,n+1+""),{id:n+1,name:t,title:e.value,done:!1,date:d}),e.value=""},i=async()=>{const e=(0,g.IO)((0,g.hJ)(m.db,"tasks"),(0,g.Xo)("id","asc")),t=await(0,g.PL)(e);console.log("loadTask:"+t.size),t.forEach((e=>{a.push(e.data())})),(0,g.PL)(s).then((e=>{console.log("addTask : "+e.size),n=e.size}))},r=async e=>{console.log("deleteTask : 시작"),console.log("index값 : "+e),console.log(a);const t=a[a.length-e-1];await(0,g.oe)((0,g.JU)(m.db,"tasks",t.id+"")),a.pop(e),k.notify("Deleted"),console.log("삭제된 id : "+t.id),console.log("삭제된 title : "+t.title)},c=e=>{f.value=!0,h.value=e},k=(0,p.Z)(),f=(0,u.iH)(!1),h=(0,u.iH)(-1);return(0,l.bv)((()=>i())),{addTask:d,newTask:e,tasks:a,deleteTask:r,confirm:f,confirmIndex:h,showConfirmDialog:c,db:m.db,loadTasks:i}}});var f=t(1639),h=t(9885),b=t(4925),y=t(963),q=t(3246),_=t(4458),W=t(3190),v=t(1233),C=t(3115),T=t(2857),Z=t(8988),Q=t(1357),x=t(1821),D=t(2146),S=t(9984),z=t.n(S);const I=(0,f.Z)(k,[["render",c]]),U=I;z()(k,"components",{QPage:h.Z,QInput:b.Z,QBtn:y.Z,QList:q.Z,QCard:_.Z,QCardSection:W.Z,QItemSection:v.Z,QItemLabel:C.Z,QIcon:T.Z,QDialog:Z.Z,QAvatar:Q.Z,QCardActions:x.Z}),z()(k,"directives",{ClosePopup:D.Z})}}]);